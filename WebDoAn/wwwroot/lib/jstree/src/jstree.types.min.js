/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/jstree@3.3.16/src/jstree.types.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define("jstree.types",["jquery","./jstree.js"],t):"object"==typeof exports?t(require("jquery"),require("./jstree.js")):t(jQuery,jQuery.jstree)}((function(t,e,i){"use strict";t.jstree.plugins.types||(t.jstree.defaults.types={default:{}},t.jstree.defaults.types[t.jstree.root]={},t.jstree.plugins.types=function(e,a){this.init=function(e,r){var s,d;if(r&&r.types&&r.types.default)for(s in r.types)if("default"!==s&&s!==t.jstree.root&&r.types.hasOwnProperty(s))for(d in r.types.default)r.types.default.hasOwnProperty(d)&&r.types[s][d]===i&&(r.types[s][d]=r.types.default[d]);a.init.call(this,e,r),this._model.data[t.jstree.root].type=t.jstree.root},this.refresh=function(e,i){a.refresh.call(this,e,i),this._model.data[t.jstree.root].type=t.jstree.root},this.bind=function(){this.element.on("model.jstree",function(e,a){var r,s,d,n=this._model.data,l=a.nodes,_=this.settings.types,o="default";for(r=0,s=l.length;r<s;r++){if(o="default",n[l[r]].original&&n[l[r]].original.type&&_[n[l[r]].original.type]&&(o=n[l[r]].original.type),n[l[r]].data&&n[l[r]].data.jstree&&n[l[r]].data.jstree.type&&_[n[l[r]].data.jstree.type]&&(o=n[l[r]].data.jstree.type),n[l[r]].type=o,!0===n[l[r]].icon&&_[o].icon!==i&&(n[l[r]].icon=_[o].icon),_[o].li_attr!==i&&"object"==typeof _[o].li_attr)for(d in _[o].li_attr)if(_[o].li_attr.hasOwnProperty(d)){if("id"===d)continue;n[l[r]].li_attr[d]===i?n[l[r]].li_attr[d]=_[o].li_attr[d]:"class"===d&&(n[l[r]].li_attr.class=_[o].li_attr.class+" "+n[l[r]].li_attr.class)}if(_[o].a_attr!==i&&"object"==typeof _[o].a_attr)for(d in _[o].a_attr)if(_[o].a_attr.hasOwnProperty(d)){if("id"===d)continue;n[l[r]].a_attr[d]===i?n[l[r]].a_attr[d]=_[o].a_attr[d]:"href"===d&&"#"===n[l[r]].a_attr[d]?n[l[r]].a_attr.href=_[o].a_attr.href:"class"===d&&(n[l[r]].a_attr.class=_[o].a_attr.class+" "+n[l[r]].a_attr.class)}}n[t.jstree.root].type=t.jstree.root}.bind(this)),a.bind.call(this)},this.get_json=function(e,i,r){var s,d,n=this._model.data,l=i?t.extend(!0,{},i,{no_id:!1}):{},_=a.get_json.call(this,e,l,r);if(!1===_)return!1;if(t.vakata.is_array(_))for(s=0,d=_.length;s<d;s++)_[s].type=(_[s].id||0===_[s].id)&&n[_[s].id]&&n[_[s].id].type?n[_[s].id].type:"default",i&&i.no_id&&(delete _[s].id,_[s].li_attr&&_[s].li_attr.id&&delete _[s].li_attr.id,_[s].a_attr&&_[s].a_attr.id&&delete _[s].a_attr.id);else _.type=(_.id||0===_.id)&&n[_.id]&&n[_.id].type?n[_.id].type:"default",i&&i.no_id&&(_=this._delete_ids(_));return _},this._delete_ids=function(e){if(t.vakata.is_array(e)){for(var i=0,a=e.length;i<a;i++)e[i]=this._delete_ids(e[i]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&t.vakata.is_array(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,r,s,d,n){if(!1===a.check.call(this,e,r,s,d,n))return!1;r=r&&(r.id||0===r.id)?r:this.get_node(r),s=s&&(s.id||0===s.id)?s:this.get_node(s);var l,_,o,c,h=r&&(r.id||0===r.id)?n&&n.origin?n.origin:t.jstree.reference(r.id):null;switch(h=h&&h._model&&h._model.data?h._model.data:null,e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===t.inArray(r.id,s.children)){if((l=this.get_rules(s)).max_children!==i&&-1!==l.max_children&&l.max_children===s.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:d,obj:!(!r||!r.id&&0!==r.id)&&r.id,par:!(!s||!s.id&&0!==s.id)&&s.id})},!1;if(l.valid_children!==i&&-1!==l.valid_children&&-1===t.inArray(r.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:d,obj:!(!r||!r.id&&0!==r.id)&&r.id,par:!(!s||!s.id&&0!==s.id)&&s.id})},!1;if(h&&r.children_d&&r.parents){for(_=0,o=0,c=r.children_d.length;o<c;o++)_=Math.max(_,h[r.children_d[o]].parents.length);_=_-r.parents.length+1}(_<=0||_===i)&&(_=1);do{if(l.max_depth!==i&&-1!==l.max_depth&&l.max_depth<_)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:d,obj:!(!r||!r.id&&0!==r.id)&&r.id,par:!(!s||!s.id&&0!==s.id)&&s.id})},!1;s=this.get_node(s.parent),l=this.get_rules(s),_++}while(s)}}return!0},this.get_rules=function(t){if(!(t=this.get_node(t)))return!1;var e=this.get_type(t,!0);return e.max_depth===i&&(e.max_depth=-1),e.max_children===i&&(e.max_children=-1),e.valid_children===i&&(e.valid_children=-1),e},this.get_type=function(e,i){return!!(e=this.get_node(e))&&(i?t.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,a){var r,s,d,n,l,_,o,c,h=this._model.data;if(t.vakata.is_array(e)){for(s=0,d=(e=e.slice()).length;s<d;s++)this.set_type(e[s],a);return!0}if(r=this.settings.types,e=this.get_node(e),!r[a]||!e)return!1;if((o=this.get_node(e,!0))&&o.length&&(c=o.children(".jstree-anchor")),n=e.type,l=this.get_icon(e),e.type=a,(!0===l||!r[n]||r[n].icon!==i&&l===r[n].icon)&&this.set_icon(e,r[a].icon===i||r[a].icon),r[n]&&r[n].li_attr!==i&&"object"==typeof r[n].li_attr)for(_ in r[n].li_attr)if(r[n].li_attr.hasOwnProperty(_)){if("id"===_)continue;"class"===_?(h[e.id].li_attr.class=(h[e.id].li_attr.class||"").replace(r[n].li_attr[_],""),o&&o.removeClass(r[n].li_attr[_])):h[e.id].li_attr[_]===r[n].li_attr[_]&&(h[e.id].li_attr[_]=null,o&&o.removeAttr(_))}if(r[n]&&r[n].a_attr!==i&&"object"==typeof r[n].a_attr)for(_ in r[n].a_attr)if(r[n].a_attr.hasOwnProperty(_)){if("id"===_)continue;"class"===_?(h[e.id].a_attr.class=(h[e.id].a_attr.class||"").replace(r[n].a_attr[_],""),c&&c.removeClass(r[n].a_attr[_])):h[e.id].a_attr[_]===r[n].a_attr[_]&&("href"===_?(h[e.id].a_attr[_]="#",c&&c.attr("href","#")):(delete h[e.id].a_attr[_],c&&c.removeAttr(_)))}if(r[a].li_attr!==i&&"object"==typeof r[a].li_attr)for(_ in r[a].li_attr)if(r[a].li_attr.hasOwnProperty(_)){if("id"===_)continue;h[e.id].li_attr[_]===i?(h[e.id].li_attr[_]=r[a].li_attr[_],o&&("class"===_?o.addClass(r[a].li_attr[_]):o.attr(_,r[a].li_attr[_]))):"class"===_&&(h[e.id].li_attr.class=r[a].li_attr[_]+" "+h[e.id].li_attr.class,o&&o.addClass(r[a].li_attr[_]))}if(r[a].a_attr!==i&&"object"==typeof r[a].a_attr)for(_ in r[a].a_attr)if(r[a].a_attr.hasOwnProperty(_)){if("id"===_)continue;h[e.id].a_attr[_]===i?(h[e.id].a_attr[_]=r[a].a_attr[_],c&&("class"===_?c.addClass(r[a].a_attr[_]):c.attr(_,r[a].a_attr[_]))):"href"===_&&"#"===h[e.id].a_attr[_]?(h[e.id].a_attr.href=r[a].a_attr.href,c&&c.attr("href",r[a].a_attr.href)):"class"===_&&(h[e.id].a_attr.class=r[a].a_attr.class+" "+h[e.id].a_attr.class,c&&c.addClass(r[a].a_attr[_]))}return!0}})}));
//# sourceMappingURL=/sm/de371c97c9ad72ff75def4bbf5a5a4f56364524e650e86c520095d73e7cae8bd.map